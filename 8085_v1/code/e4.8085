BEGIN:
LDA 2000H ; READ INPUT
MVI B,00H ; ARXIKOPOIHSH B
STC ; CY=1 
CMC ; TELIKA CY=0
MVI C,00H ; ARXIKOPOIHSH C
MVI D,00H ; ARXIKOPOIHSH D
RAR ; CY = LSB
JC COMP1 ; IF CY = 1 JUMP COMP1
RAR ; NEXT INPUT-BIT
JC FIRST_OR_RESULT_1 ; IF CY = 1 THEN RESULT = 1
JNC FIRST_OR_RESULT_0 ;ELSE RESULT = 0

COMP1:
RAR ; NEXT INPUT - BIT

FIRST_OR_RESULT_1: 
INR B ;B=1

FIRST_OR_RESULT_0:
MOV D,B ;D=RESULT
MVI B,00H ; CLEAR B
RAR ; NEXT INPUT-BIT
JC COMP2 ; IF CY=1 JUMP COMP2
RAR ;NEXT INPUT-BIT
JC SECOND_OR_RESULT_1 ; IF CY=1 THEN RESULT=1
JNC SECOND_OR_RESULT_0 ; ELSE RESULT=0

COMP2:
RAR ;NEXT INPUT-BIT

SECOND_OR_RESULT_1:
INR B ; B=1

SECOND_OR_RESULT_0:
MOV C,B ; C=RESULT
MVI B,00H ;CLEAR B

MOV E,A ;SAVE A
MOV A,C ;A=RESULT
CMP D ;C=D? 
STC ; CY=1 
CMC ; TELIKA CY=0
RAL ; SHIFT LEFT GIA NA EUTHUGRAMISW THN EKSODO
MOV C,A ; C=RESULT TOU DEYTEROY LSB
JZ CONTINUE ; IF RESULTS ARE SAME THEN XOR_RESULT=0 
INR C ; ELSE XOR RESULT = 1 (O EXEI TO RESULT TWN 2 LSB)

CONTINUE:
MOV A,E ; EPANAFORA TOU A
RAR ; NEXT INPUT-BIT
JNC COMP3 ; IF CY=0 JUMP COMP3
RAR ; NEXT BIT
JNC FIRST_AND_RESULT_0 ; IF CY=0 THEN AND_RESULT=0
INR B ; ELSE RESULT=1
JC FIRST_AND_RESULT_0 ; JUMP  KSEPERNONTAS COMP3 

COMP3:
RAR ;NEXT BIT

FIRST_AND_RESULT_0:
MOV E,A ;SAVE A
MOV A,B ;A=AND_RESULT
STC ;CY=1
CMC ;TELIKA CY=0
RAL ;2 SHIFT LEFT GIA NA PAEI TO AND_RESULT STH THESI 3
RAL
ADD C ;TWRA O A PERIEXEI [0 0 0 0 0 X2 X1 X0]
MOV C,A ; C=RESULT EWS TWRA
MOV A,E ;EPANAFORA TOU A
MVI B,00H ;CLEAR B
RAR ;NEXT INPUT-BIT
JNC COMP4 ;IF CY=0 JUMP COMP4
RAR ;NEXT BIT
JNC SECOND_AND_RESULT_0 ;IF CY=0 THEN AND_RESULT=0 
INR B ;ELSE AND_RESULT=1
JC SECOND_AND_RESULT_0 ;JUMP KSEPERNONTAS TO COMP4

COMP4:
RAR ;NEXT BIT

SECOND_AND_RESULT_0:
MOV E,A ;SAVE A
MOV A,B ;A=AND_RESULT
STC ;CY=1
CMC ;TELIKA CY=0
RAL ;3 SHIFT LEFT GIA NA PAEI TO AND_RESULT STH THESI 4
RAL
RAL
ADD C ;TWRA O A PERIEXEI [0 0 0 0 X3 X2 X1 X0]
MOV C,A ;C=TELIKO RESULT

FINISH:
MOV A,C ;TO TELIKO RESULT PAEI STON A
CMA ;TA LED EINAI ANTISTROFHS LOGIKIS
STA 3000H ;OUTPUT
RST 1

END