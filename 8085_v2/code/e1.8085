BEGIN:
IN 10H

;A ERWTHMA
LXI H,0900H 	;ARXIKH ADDRESS 0900
MVI A,00H 	;A THA PERIEXEI APO 0 EWS 255 

LOOP1:
MOV M,A 		;(HL)=CURRENT NUMBER
INR A 		;NEXT NUMBER
INX H 		;NEXT ADDRESS
MOV M,A 		;HL)=NEXT NUMBER
CPI FFH 		;CURRENT NUMBER = 255
JNZ LOOP1 	;AN OXI SUNEXISE NA VAZEIS ARITHMOUS
 			;ALLIWS TELOS A ERWTHMATOS

;B ERWTHMA 
LXI B,0008H 	;ARXIKOPOIW TO PLHTHOS TWN ASWN ME 8 POU EINAI OI ASOI TOY 255
MVI A,00H 	;KRATA TOUS ARITHMOUS O EWS 255
MVI D,00H 	;O D THA XREIASTEI GIA NA SWZEI TON A

NEXT_NUM:
MOV A,D 		;EPANAFORA A(TIN 1H FORA A=00H)
MVI E,00H 	;KRATA TO PLHTHOS TWN BIT POU CHECKARISTHKAN GIA TO AN EINAI 1 H 0
INR A 		;NEXT NUMBER
MOV D,A 		;SAVE A
CPI FFH 		;IF NUMBER = 255 THEN FINISH
JNZ CHECK 	;ELSE CHECK THE NUMBER
JZ FINISH 	;TELOS B ERWTHMATOS

CHECK:
INR E 		;E=THESI CURRENT BIT
MOV A,E 		;(Á)<--(Å)
CPI 09H 		;IF E = 09H THEN GO TO THE NEXT NUMBER
MOV A,D 		;EPANAFORA A
JNZ CONTINUE 	;ELSE CONTINUE
JZ NEXT_NUM 	

CONTINUE:
RAR 			;CY = LSB
JNC CHECK 	;IF CY = 0 TOTE TSEKARE TO EPOMENO BIT
INX B 		;ELSE ANOTHER ONE ACE 
JC CHECK 		;CHECK THE NEXT BIT

;G ERWTHMA
FINISH:
MVI E,0FH 	;O E THA PAREI TOUS ARITHMOUS APO 10H EWS 60H
MVI D,00H 	;PLHTHOS ARITHMWN APO 10H EWS 60H

CALCULATE:
INR E 		;NEXT NUMBER
INR D 		;PLHTHOS=PLHTHOS+1
MOV A,E 		;(Á)<--(Å)
CPI 60H 		;IF E=60H THEN SHOW THE RESULT
JNZ CALCULATE 	;ELSE CONTINUE CALCULATING
JZ RESULT 

;D ERWTHMA
RESULT:
STC
CMC 			;CY = 0 GIA SIGOURIA
LDA 2000H 	;READ INPUT FROM SWITCHES
RAL 			;ME 6 SHIFT LEFT EXW CY = 3o LSB FROM SWITCHES 
RAL 			;KANW RAL GIA NA IKANOPOIEITAI H EKS ARISTERWN PROTERAIOTHTA
RAL 
RAL 
RAL 
RAL 
JC SHOW_D 	;IF 3o LSB = 1 THEN SHOW D
RAL   
JC SHOW_C 	;IF 2o LSB = 1 THEN SHOW C
RAL ;ELSE 
JC SHOW_B 	;IF 1o LSB = 1 THEN SHOW B
MVI A,FFH 	;ELSE ALL LED ARE OFF
STA 3000H 	;OUTPUT
JMP RESULT 	;CONTINUE TO READ INPUT

SHOW_B:
MOV A,B  		;(A)<--(B)
CMA 			;SUMPLHRWSH TWN LED 
STA 3000H 	;OUTPUT
JMP RESULT 	;CONTINUE TO READ INPUT

SHOW_C:
MOV A,C 		;(A)<--(C)
CMA 			;SUMPLHRWSH TWN LED 
STA 3000H 	;OUTPUT
JMP RESULT 	;CONTINUE TO READ INPUT

SHOW_D:
MOV A,D 		;(Á)<--(D)
CMA 			;SUMPLHRWSH TWN LED 
STA 3000H 	;OUTPUT
JMP RESULT 	;CONTINUE TO READ INPUT

END: END