MVI B,03H		
MVI C,E8H			;(BC)=03E8H FOR TIME DELAY


BEGIN: 

	LDA 2000H		;READ SWITCHES
	RAL			;TAKE THE MSB OF THE DIP-SWITCHES AND CHECK IT 
	JC BEGIN		;IF MSB=1 THE SWITCH IS UP. 
				;THEN WE HAVE TO READ INPUT AGAIN,
				;UNTIL THE MSB SWITCH IS DOWN

DOWN_TO_UP:		;NOW MSB IS DOWN FOR SURE	

	LDA 2000H		;READ INPUT 
	RAL			;IF MSB IS 1 --> C=1
	JNC DOWN_TO_UP	;READ INPUT UNTIL SWITCH IS UP


UP_TO_DOWN:		;NOW MSB IS UP FOR SURE

	LDA 2000H		;READ INPUT 
	RAL			;IF MSB=0 --> C=0 AND LED HAVE TO OPEN
	JC UP_TO_DOWN	;READ INPUT UNTIL SWITCH IS DOWN


MSBLED_ON:		;THE LED IS ON FOR SURE BECAUSE WE HAD OFF-ON-OFF 
	MVI D,00H		;(D)=0 --> MSB IS DOWN
	MVI E,C8H		;(E)=200 IN DECIMAL,ITS A COUNTER FOR SECS
	MVI A,7FH		;(A)=01111111 IN BINARY
	STA 3000H		;ANAVEI MONO TO MSB
				;EPEIDH EINAI ANTISTROFHS LOGIKHS 	

DELAY:				
	CALL DELB		;DELB DELAYS 1 SEC
	DCR E		;(E)= (Å)-1
	MOV A,E		;(A)<--(E)
	CPI 00H		;COMPARE A WITH 00H
	JZ LED_OFF	;IF (A)=00H THEN MSB_LED HAVE TO BE OFF
	MOV A,D      	;(A)<--(D)
	CPI 00H		;CHECK THE STATE WHERE I AM
	JZ STATE1		;IF Z=0 THE DIP-SWITCH IS DOWN YET
	CPI 01H		;COMPARE (A) WITH 01H
	JZ STATE2		;IF Z=0 THE DIP-SWITCH WENT FROM 
				;OFF TO ON. CHECK NEXT MOVE
		
LED_OFF:			;CLOSE THE MSB_LED

	MVI A,FFH		;(A)=11111111(BINARY)
	STA 3000H		;ALL LEDS OFF
	JMP BEGIN		


STATE1:			
	
	LDA 2000H 	;READ INPUT AGAIN
	RAL 			;TAKE THE MSB OF SWITCHES
	JNC DELAY		;IF MSB=0 THEN ITS DOWN YET
				;THERE ARE NO CHANGES
	INR D 		;ELSE (D)=01H AND THAT MEANS
				;THAT MSB WENT FROM OFF TO ON
	JMP DELAY


STATE2:
	
	LDA 2000H		;READ INPUT AGAIN
	RAL 			;TAKE THE MSB OF SWITCHES
	JC DELAY		;IF MSB=1 CONTINUE AS YOU ARE
	JMP REFRESH	;IF MSB=0 HAVE TO REFRESH DELB TIME


REFRESH:			;MSB_LED HAVE TO BE OPEN 
				;FOR ANOTHER 20 SECS
	
	MVI E,C8H		;(E)=200 IN DECIMAL
	MVI D,00H		;(D)=00H, WE MAKE A NEW START
	JMP DELAY

END : END 
	
	

