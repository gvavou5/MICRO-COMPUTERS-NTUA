	LXI B,0014H	;DELAY IS 20MS 	
	IN 10H	
	MVI A,0DH		;SWITCH MASK 00001101 
	SIM			
	EI			;SWITCH ENABLE 
	MVI A,00H		

WAIT:
	LXI H,0910H	;IF CONTENT IS 2 THEN INTERRUPT 
	MOV A,M		
	CPI 02H		;COMPARE WITH 2 DEC
	JZ RST5	
	JMP WAIT		

RST5:	
	LXI H,0910H	;MAKE CONTENT ZERO AND WAIT FOR ANOTHER INTERRUPT
	MVI M,00H	
	LXI H,0900H	;START VALUE FOR 7 SEGMENTS 
	MVI M,10H		
	INX H
	MVI M,10H
	INX H		
	MVI M,10H
	INX H
	MVI M,10H
	INX H
	MVI M,00H
	INX H
	MVI M,06H
	MVI H,7AH		;120 LOOPS 
	MVI A,FFH
	

SHOW1:
	MVI L,19H		;(L)=25(500MS DELAY)
	MVI A,00H		;(A)=0
	

SHOW2:	
	DI			;TURN OFF THE SWITCHES 
	PUSH H		;PUSH HL IN THE STACK
	PUSH B		;PUSH BC IN THE STACK
	MOV B,A		
	LXI H,0910H	
	MOV A,M	
	CPI 01H		;IF PUSH INTR GO TO LABEL WAIT
	MOV A,B	
	POP B		;POP OUT BC FROM THE STACK
	POP H		;POP OUT HL FROM THE STACK
	EI
	STA 3000H 	
	JZ WAIT
	CALL DELB		;DELAY 20MS
	JMP DISPLAY1		;SHOW THE TIME LEFT 

CMP1:
	DCR L		
	JNZ SHOW2
	INR D
	MOV E,A		;(E)<--(A)
	MOV A,D		;1sec 
	CPI 02H		;COMPARE WITH 2 DEC
	JZ CREATE
	
KEEP_ON:
	MOV A,E
	DCR H		;DECREASE THE LOOPS
	JNZ SHOW1	
	JMP WAIT		;IF 1 MIN HAS PASSED GO TO WAIT

DISPLAY1:
	DI			;TURN OF THE SWITCHES
	PUSH B		;PUSH HL IN THE STACK
	PUSH D		;PUSH DE IN THE STACK
	PUSH H		;PUSH HL IN THE STACK
	LXI D,0900H	;(DE)<-- CONTENT OF ALL 7-SEGMENTS 
	MOV B,A		 
	CALL STDM	
	CALL DCD
	MOV A,B	
	POP H		;POP OUT HL FROM THE STACK
	POP D		;POP OUT DE FROM THE STACK
	POP B		;POP OUT BC FROM THE STACK
	EI		
	JMP CMP1
	
CREATE:
	DI			;TURN OFF THE SWITCHES
	PUSH B		;PUSH BC IN THE STACK
	PUSH H		;PUSH HL IN THE STACK
	LXI H,0904H	;DECREASE THE CONTENT OF THE LEFT DIGIT
	DCR M
	MOV B,A
	MOV A,M		;IF (M)=255 DEC DECREASE BY 1  
	CPI FFH		;COMPARE WITH FFH=255 DECIMAL
	JZ ZERO_END		

NEXT_MOVE:
	MOV A,B		;(A)<--(B)
	POP H		;POP OUT HL FROM THE STACK
	POP B		;POP OUT BC FROM THE STACK
	EI		
	MVI D,00H		;(D)<--0
	JMP KEEP_ON

ZERO_END:	
	DI		
	PUSH B		;PUSH BC IN THE STACK
	PUSH H		;PUSH HL IN THE STACK
	LXI H,0905H	;LOAD THE LEFTER 7-SEGMENT
	DCR M		;HAVE TO DECREASE THE DECADES
	POP H		;POP OUT HL FROM THE STACK
	POP B		;POP OUT BC FROM THE STACK
	MVI M,09H		;(M)=9 TO START COUNTING AGAIN
	DCR H		;DECREASE THE MEMORY POINTER
	DCR M		;DECREASE THE CONTENT OF THE MEMORY
	JMP NEXT_MOVE



INTR_ROUTINE:		; 
	PUSH H		;PUSH H IN STACK TO SAVE IT
	LXI H,0910H	; 
	INR M		
	POP H		;POP OUT H FROM THE STACK
	EI			
	RET			;RESTORE

END:	
	END
